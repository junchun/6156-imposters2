<HTML>
<HEAD></HEAD>
<BODY>
<CODE><PRE>
<A NAME="token0">0:</A>1(0)-1(19):PACKAGE_DECLARATION:package controllers;
<A NAME="token1">1:</A>3(22)-3(49):IMPORT_DECLARATION:import com.google.gson.Gson;
<A NAME="token2">2:</A>4(51)-4(76):IMPORT_DECLARATION:import io.javalin.Javalin;
<A NAME="token3">3:</A>5(78)-5(104):IMPORT_DECLARATION:import java.io.IOException;
<A NAME="token4">4:</A>6(106)-6(128):IMPORT_DECLARATION:import java.util.Queue;
<A NAME="token5">5:</A>7(130)-7(153):IMPORT_DECLARATION:import models.GameBoard;
<A NAME="token6">6:</A>8(155)-8(176):IMPORT_DECLARATION:import models.Message;
<A NAME="token7">7:</A>9(178)-9(196):IMPORT_DECLARATION:import models.Move;
<A NAME="token8">8:</A>10(198)-10(218):IMPORT_DECLARATION:import models.Player;
<A NAME="token9">9:</A>11(220)-11(266):IMPORT_DECLARATION:import org.eclipse.jetty.websocket.api.Session;
<A NAME="token10">10:</A>12(268)-12(291):IMPORT_DECLARATION:import org.slf4j.Logger;
<A NAME="token11">11:</A>13(293)-13(323):IMPORT_DECLARATION:import org.slf4j.LoggerFactory;
<A NAME="token12">12:</A>13(323)-15(341):CLASS_DECLARATION:;
<A NAME="token13">13:</A>17(371)-17(388):VARIABLE_DECLARATION:PORT_NUMBER = 8080
<A NAME="token14">14:</A>19(417)-19(419):VARIABLE_DECLARATION:app
<A NAME="token15">15:</A>21(452)-21(452):VARIABLE_DECLARATION:e
<A NAME="token16">16:</A>23(482)-23(483):VARIABLE_DECLARATION:p1
<A NAME="token17">17:</A>25(513)-25(514):VARIABLE_DECLARATION:p2
<A NAME="token18">18:</A>30(623)-30(649):METHOD_DECLARATION:main(final String[] args) {
<A NAME="token19">19:</A>35(682)-35(697):IF:if(app=="/echo")
<A NAME="token20">20:</A>35(698)-35(698):BLOCK:{
<A NAME="token21">21:</A>36(706)-36(727):METHOD_INVOCATION:ctx.result(ctx.body())
<A NAME="token22">22:</A>36(717)-36(726):METHOD_INVOCATION:ctx.body()
<A NAME="token23">23:</A>37(734)-37(734):BLOCK_END:}
<A NAME="token24">24:</A>37(734)-37(734):IF_END:}
<A NAME="token25">25:</A>39(741)-39(759):IF:if(app=="/newgame")
<A NAME="token26">26:</A>39(760)-39(760):BLOCK:{
<A NAME="token27">27:</A>40(770)-40(800):METHOD_INVOCATION:ctx.redirect("/tictactoe.html")
<A NAME="token28">28:</A>41(809)-41(809):BLOCK_END:}
<A NAME="token29">29:</A>41(809)-41(809):IF_END:}
<A NAME="token30">30:</A>43(824)-43(844):IF:if(app=="/startgame")
<A NAME="token31">31:</A>43(845)-43(845):BLOCK:{
<A NAME="token32">32:</A>44(862)-44(876):VARIABLE_DECLARATION:rq = ctx.body()
<A NAME="token33">33:</A>44(867)-44(876):METHOD_INVOCATION:ctx.body()
<A NAME="token34">34:</A>46(902)-46(920):ASSIGNMENT:e = new GameBoard()
<A NAME="token35">35:</A>46(906)-46(920):NEW:new GameBoard()
<A NAME="token36">36:</A>47(936)-47(989):VARIABLE_DECLARATION:tt = rq.charAt(rq.indexOf("type=") + "type=".length())
<A NAME="token37">37:</A>47(941)-47(989):METHOD_INVOCATION:rq.charAt(rq.indexOf("type=") + "type=".length())
<A NAME="token38">38:</A>47(951)-47(969):METHOD_INVOCATION:rq.indexOf("type=")
<A NAME="token39">39:</A>47(973)-47(988):METHOD_INVOCATION:"type=".length()
<A NAME="token40">40:</A>48(1000)-48(1016):ASSIGNMENT:p1 = new Player()
<A NAME="token41">41:</A>48(1005)-48(1016):NEW:new Player()
<A NAME="token42">42:</A>49(1027)-49(1043):METHOD_INVOCATION:p1.changeTheId(1)
<A NAME="token43">43:</A>50(1054)-50(1076):METHOD_INVOCATION:p1.changePlayerType(tt)
<A NAME="token44">44:</A>52(1096)-52(1110):METHOD_INVOCATION:e.makeIt1st(p1)
<A NAME="token45">45:</A>54(1135)-54(1150):VARIABLE_DECLARATION:bbb = new Gson()
<A NAME="token46">46:</A>54(1141)-54(1150):NEW:new Gson()
<A NAME="token47">47:</A>55(1161)-55(1185):METHOD_INVOCATION:ctx.result(bbb.toJson(e))
<A NAME="token48">48:</A>55(1172)-55(1184):METHOD_INVOCATION:bbb.toJson(e)
<A NAME="token49">49:</A>56(1194)-56(1194):BLOCK_END:}
<A NAME="token50">50:</A>56(1194)-56(1194):IF_END:}
<A NAME="token51">51:</A>58(1209)-58(1228):IF:if(app=="/joingame")
<A NAME="token52">52:</A>58(1229)-58(1229):BLOCK:{
<A NAME="token53">53:</A>59(1239)-59(1273):METHOD_INVOCATION:ctx.redirect("/tictactoe.html?p=2")
<A NAME="token54">54:</A>61(1298)-61(1345):VARIABLE_DECLARATION:ptt = p1.retrievePlayerType() == 'O' ? 'X' : 'O'
<A NAME="token55">55:</A>61(1304)-61(1326):METHOD_INVOCATION:p1.retrievePlayerType()
<A NAME="token56">56:</A>63(1365)-63(1381):ASSIGNMENT:p2 = new Player()
<A NAME="token57">57:</A>63(1370)-63(1381):NEW:new Player()
<A NAME="token58">58:</A>64(1392)-64(1408):METHOD_INVOCATION:p2.changeTheId(2)
<A NAME="token59">59:</A>65(1419)-65(1442):METHOD_INVOCATION:p2.changePlayerType(ptt)
<A NAME="token60">60:</A>67(1462)-67(1476):METHOD_INVOCATION:e.makeIt2nd(p2)
<A NAME="token61">61:</A>68(1487)-68(1501):METHOD_INVOCATION:e.asdgasg(true)
<A NAME="token62">62:</A>70(1526)-70(1540):VARIABLE_DECLARATION:dd = new Gson()
<A NAME="token63">63:</A>70(1531)-70(1540):NEW:new Gson()
<A NAME="token64">64:</A>71(1551)-71(1589):METHOD_INVOCATION:sendGameBoardToAllPlayers(dd.toJson(e))
<A NAME="token65">65:</A>71(1577)-71(1588):METHOD_INVOCATION:dd.toJson(e)
<A NAME="token66">66:</A>72(1598)-72(1598):BLOCK_END:}
<A NAME="token67">67:</A>72(1598)-72(1598):IF_END:}
<A NAME="token68">68:</A>74(1613)-74(1638):IF:if(app=="/move/:playerId")
<A NAME="token69">69:</A>74(1639)-74(1639):BLOCK:{
<A NAME="token70">70:</A>75(1656)-75(1670):VARIABLE_DECLARATION:rb = ctx.body()
<A NAME="token71">71:</A>75(1661)-75(1670):METHOD_INVOCATION:ctx.body()
<A NAME="token72">72:</A>76(1688)-76(1723):VARIABLE_DECLARATION:playerId = ctx.pathParam("playerId")
<A NAME="token73">73:</A>76(1699)-76(1723):METHOD_INVOCATION:ctx.pathParam("playerId")
<A NAME="token74">74:</A>77(1741)-77(1746):VARIABLE_DECLARATION:player
<A NAME="token75">75:</A>78(1762)-78(1775):VARIABLE_DECLARATION:m = new Move()
<A NAME="token76">76:</A>78(1766)-78(1775):NEW:new Move()
<A NAME="token77">77:</A>79(1786)-79(1810):IF:if (playerId.equals("1"))
<A NAME="token78">78:</A>79(1790)-79(1809):METHOD_INVOCATION:playerId.equals("1")
<A NAME="token79">79:</A>79(1812)-79(1812):BLOCK:{
<A NAME="token80">80:</A>80(1824)-80(1834):ASSIGNMENT:player = p1
<A NAME="token81">81:</A>81(1845)-81(1845):BLOCK_END:}
<A NAME="token82">82:</A>81(1845)-81(1845):IF_END:}
<A NAME="token83">83:</A>81(1847)-81(1850):ELSE:else
<A NAME="token84">84:</A>81(1852)-81(1852):BLOCK:{
<A NAME="token85">85:</A>82(1864)-82(1874):ASSIGNMENT:player = p1
<A NAME="token86">86:</A>83(1885)-83(1885):BLOCK_END:}
<A NAME="token87">87:</A>83(1885)-83(1885):ELSE_END:}
<A NAME="token88">88:</A>84(1899)-85(1993):VARIABLE_DECLARATION:moveX = Character.getNumericValue(
<A NAME="token89">89:</A>84(1907)-85(1993):METHOD_INVOCATION:Character.getNumericValue(
<A NAME="token90">90:</A>85(1950)-85(1992):METHOD_INVOCATION:rb.charAt(rb.indexOf("x=") + "x=".length())
<A NAME="token91">91:</A>85(1960)-85(1975):METHOD_INVOCATION:rb.indexOf("x=")
<A NAME="token92">92:</A>85(1979)-85(1991):METHOD_INVOCATION:"x=".length()
<A NAME="token93">93:</A>86(2008)-87(2102):VARIABLE_DECLARATION:moveY = Character.getNumericValue(
<A NAME="token94">94:</A>86(2016)-87(2102):METHOD_INVOCATION:Character.getNumericValue(
<A NAME="token95">95:</A>87(2059)-87(2101):METHOD_INVOCATION:rb.charAt(rb.indexOf("y=") + "y=".length())
<A NAME="token96">96:</A>87(2069)-87(2084):METHOD_INVOCATION:rb.indexOf("y=")
<A NAME="token97">97:</A>87(2088)-87(2100):METHOD_INVOCATION:"y=".length()
<A NAME="token98">98:</A>88(2113)-88(2134):METHOD_INVOCATION:m.whoBePlaying(player)
<A NAME="token99">99:</A>89(2145)-89(2168):METHOD_INVOCATION:m.whatWasTheMoveX(moveX)
<A NAME="token100">100:</A>90(2179)-90(2202):METHOD_INVOCATION:m.whatWasTheMoveY(moveY)
<A NAME="token101">101:</A>92(2230)-92(2247):VARIABLE_DECLARATION:kk = new Message()
<A NAME="token102">102:</A>92(2235)-92(2247):NEW:new Message()
<A NAME="token103">103:</A>93(2258)-93(2292):METHOD_INVOCATION:kk.makeItValid(e.mmvvvv113(m) == 1)
<A NAME="token104">104:</A>93(2273)-93(2286):METHOD_INVOCATION:e.mmvvvv113(m)
<A NAME="token105">105:</A>94(2303)-94(2322):METHOD_INVOCATION:kk.changeStatus(100)
<A NAME="token106">106:</A>95(2333)-95(2356):IF:if (e.mmvvvv113(m) == 0)
<A NAME="token107">107:</A>95(2337)-95(2350):METHOD_INVOCATION:e.mmvvvv113(m)
<A NAME="token108">108:</A>95(2358)-95(2358):BLOCK:{
<A NAME="token109">109:</A>96(2370)-96(2399):METHOD_INVOCATION:kk.setMessage("Invalid move!")
<A NAME="token110">110:</A>97(2410)-97(2410):BLOCK_END:}
<A NAME="token111">111:</A>97(2410)-97(2410):IF_END:}
<A NAME="token112">112:</A>97(2412)-97(2415):ELSE:else
<A NAME="token113">113:</A>97(2417)-97(2417):BLOCK:{
<A NAME="token114">114:</A>98(2429)-98(2452):IF:if (e.ssmmmm113(m) == 1)
<A NAME="token115">115:</A>98(2433)-98(2446):METHOD_INVOCATION:e.ssmmmm113(m)
<A NAME="token116">116:</A>98(2454)-98(2454):BLOCK:{
<A NAME="token117">117:</A>99(2468)-99(2493):IF:if (e.didanyonewin() == 1)
<A NAME="token118">118:</A>99(2472)-99(2487):METHOD_INVOCATION:e.didanyonewin()
<A NAME="token119">119:</A>99(2495)-99(2495):BLOCK:{
<A NAME="token120">120:</A>100(2511)-100(2546):METHOD_INVOCATION:kk.setMessage("The game is a draw!")
<A NAME="token121">121:</A>101(2561)-101(2561):BLOCK_END:}
<A NAME="token122">122:</A>101(2561)-101(2561):IF_END:}
<A NAME="token123">123:</A>101(2563)-101(2566):ELSE:else
<A NAME="token124">124:</A>101(2568)-101(2568):BLOCK:{
<A NAME="token125">125:</A>102(2588)-102(2603):VARIABLE_DECLARATION:w = e.gwwwggww()
<A NAME="token126">126:</A>102(2592)-102(2603):METHOD_INVOCATION:e.gwwwggww()
<A NAME="token127">127:</A>103(2620)-103(2668):METHOD_INVOCATION:kk.setMessage(String.format("Player %d won!", w))
<A NAME="token128">128:</A>103(2634)-103(2667):METHOD_INVOCATION:String.format("Player %d won!", w)
<A NAME="token129">129:</A>104(2683)-104(2683):BLOCK_END:}
<A NAME="token130">130:</A>104(2683)-104(2683):ELSE_END:}
<A NAME="token131">131:</A>105(2695)-105(2695):BLOCK_END:}
<A NAME="token132">132:</A>105(2695)-105(2695):IF_END:}
<A NAME="token133">133:</A>105(2697)-105(2700):ELSE:else
<A NAME="token134">134:</A>105(2702)-105(2702):BLOCK:{
<A NAME="token135">135:</A>106(2716)-106(2732):METHOD_INVOCATION:kk.setMessage("")
<A NAME="token136">136:</A>107(2745)-107(2745):BLOCK_END:}
<A NAME="token137">137:</A>107(2745)-107(2745):ELSE_END:}
<A NAME="token138">138:</A>108(2755)-108(2755):BLOCK_END:}
<A NAME="token139">139:</A>108(2755)-108(2755):ELSE_END:}
<A NAME="token140">140:</A>110(2779)-110(2793):VARIABLE_DECLARATION:dd = new Gson()
<A NAME="token141">141:</A>110(2784)-110(2793):NEW:new Gson()
<A NAME="token142">142:</A>111(2804)-111(2828):METHOD_INVOCATION:ctx.result(dd.toJson(kk))
<A NAME="token143">143:</A>111(2815)-111(2827):METHOD_INVOCATION:dd.toJson(kk)
<A NAME="token144">144:</A>112(2839)-112(2877):METHOD_INVOCATION:sendGameBoardToAllPlayers(dd.toJson(e))
<A NAME="token145">145:</A>112(2865)-112(2876):METHOD_INVOCATION:dd.toJson(e)
<A NAME="token146">146:</A>113(2886)-113(2886):BLOCK_END:}
<A NAME="token147">147:</A>113(2886)-113(2886):IF_END:}
<A NAME="token148">148:</A>117(2961)-117(2999):METHOD_INVOCATION:app.ws("/gameboard", new UiWebSocket())
<A NAME="token149">149:</A>117(2982)-117(2998):NEW:new UiWebSocket()
<A NAME="token150">150:</A>118(3004)-118(3004):METHOD_DECLARATION_END:}
<A NAME="token151">151:</A>124(3172)-124(3226):METHOD_DECLARATION:sendGameBoardToAllPlayers(final String gameBoardJson) {
<A NAME="token152">152:</A>125(3247)-125(3282):VARIABLE_DECLARATION:sessions = UiWebSocket.getSessions()
<A NAME="token153">153:</A>125(3258)-125(3282):METHOD_INVOCATION:UiWebSocket.getSessions()
<A NAME="token154">154:</A>126(3289)-126(3326):FOR:for (Session sessionPlayer : sessions)
<A NAME="token155">155:</A>126(3328)-126(3328):BLOCK:{
<A NAME="token156">156:</A>127(3336)-127(3340):TRY:try {
<A NAME="token157">157:</A>128(3350)-128(3374):METHOD_INVOCATION:sessionPlayer.getRemote()
<A NAME="token158">158:</A>128(3350)-128(3400):METHOD_INVOCATION:sessionPlayer.getRemote().sendString(gameBoardJson)
<A NAME="token159">159:</A>129(3409)-129(3409):TRY_END:}
<A NAME="token160">160:</A>129(3411)-129(3433):CATCH:catch (IOException e) {
<A NAME="token161">161:</A>131(3468)-131(3468):CATCH_END:}
<A NAME="token162">162:</A>132(3474)-132(3474):BLOCK_END:}
<A NAME="token163">163:</A>132(3474)-132(3474):FOR_END:}
<A NAME="token164">164:</A>133(3478)-133(3478):METHOD_DECLARATION_END:}
<A NAME="token165">165:</A>135(3502)-135(3509):METHOD_DECLARATION:stop() {
<A NAME="token166">166:</A>136(3515)-136(3524):METHOD_INVOCATION:app.stop()
<A NAME="token167">167:</A>137(3529)-137(3529):METHOD_DECLARATION_END:}
<A NAME="token168">168:</A>138(3531)-138(3531):CLASS_DECLARATION_END:}
</PRE></CODE>
</BODY>
</HTML>
