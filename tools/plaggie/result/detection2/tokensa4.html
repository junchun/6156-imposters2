<HTML>
<HEAD></HEAD>
<BODY>
<CODE><PRE>
<A NAME="token0">0:</A>1(0)-1(14):PACKAGE_DECLARATION:package models;
<A NAME="token1">1:</A>4(18)-4(45):IMPORT_DECLARATION:import com.google.gson.Gson;
<A NAME="token2">2:</A>7(49)-7(72):CLASS_DECLARATION:public class GameBoard {
<A NAME="token3">3:</A>9(92)-9(93):VARIABLE_DECLARATION:p1
<A NAME="token4">4:</A>11(114)-11(115):VARIABLE_DECLARATION:p2
<A NAME="token5">5:</A>13(137)-13(147):VARIABLE_DECLARATION:gameStarted
<A NAME="token6">6:</A>15(165)-15(168):VARIABLE_DECLARATION:turn
<A NAME="token7">7:</A>17(191)-17(200):VARIABLE_DECLARATION:boardState
<A NAME="token8">8:</A>19(218)-19(223):VARIABLE_DECLARATION:winner
<A NAME="token9">9:</A>21(245)-21(250):VARIABLE_DECLARATION:isDraw
<A NAME="token10">10:</A>26(296)-26(315):CONSTRUCTOR_DECLARATION:public GameBoard() {
<A NAME="token11">11:</A>27(321)-27(329):ASSIGNMENT:p1 = null
<A NAME="token12">12:</A>28(336)-28(344):ASSIGNMENT:p2 = null
<A NAME="token13">13:</A>29(351)-29(369):ASSIGNMENT:gameStarted = false
<A NAME="token14">14:</A>30(376)-30(383):ASSIGNMENT:turn = 0
<A NAME="token15">15:</A>31(390)-31(403):ASSIGNMENT:isDraw = false
<A NAME="token16">16:</A>32(410)-32(436):ASSIGNMENT:boardState = new char[3][3]
<A NAME="token17">17:</A>33(441)-33(441):CONSTRUCTOR_DECLARATION_END:}
<A NAME="token18">18:</A>40(513)-40(530):METHOD_DECLARATION:setP1(Player p1) {
<A NAME="token19">19:</A>41(536)-41(547):ASSIGNMENT:this.p1 = p1
<A NAME="token20">20:</A>42(552)-42(552):METHOD_DECLARATION_END:}
<A NAME="token21">21:</A>50(625)-50(642):METHOD_DECLARATION:setP2(Player p2) {
<A NAME="token22">22:</A>51(648)-51(659):ASSIGNMENT:this.p2 = p2
<A NAME="token23">23:</A>52(664)-52(664):METHOD_DECLARATION_END:}
<A NAME="token24">24:</A>60(737)-60(745):METHOD_DECLARATION:getP1() {
<A NAME="token25">25:</A>61(751)-61(760):RETURN:return p1;
<A NAME="token26">26:</A>62(764)-62(764):METHOD_DECLARATION_END:}
<A NAME="token27">27:</A>69(836)-69(844):METHOD_DECLARATION:getP2() {
<A NAME="token28">28:</A>70(850)-70(859):RETURN:return p2;
<A NAME="token29">29:</A>71(863)-71(863):METHOD_DECLARATION_END:}
<A NAME="token30">30:</A>78(968)-78(1004):METHOD_DECLARATION:setGameStarted(boolean gameStarted) {
<A NAME="token31">31:</A>79(1010)-79(1039):ASSIGNMENT:this.gameStarted = gameStarted
<A NAME="token32">32:</A>80(1044)-80(1044):METHOD_DECLARATION_END:}
<A NAME="token33">33:</A>88(1145)-88(1161):METHOD_DECLARATION:isGameStarted() {
<A NAME="token34">34:</A>89(1167)-89(1185):RETURN:return gameStarted;
<A NAME="token35">35:</A>90(1189)-90(1189):METHOD_DECLARATION_END:}
<A NAME="token36">36:</A>97(1276)-97(1294):METHOD_DECLARATION:setTurn(int turn) {
<A NAME="token37">37:</A>98(1300)-98(1315):ASSIGNMENT:this.turn = turn
<A NAME="token38">38:</A>99(1320)-99(1320):METHOD_DECLARATION_END:}
<A NAME="token39">39:</A>106(1402)-106(1412):METHOD_DECLARATION:getTurn() {
<A NAME="token40">40:</A>107(1418)-107(1429):RETURN:return turn;
<A NAME="token41">41:</A>108(1433)-108(1433):METHOD_DECLARATION_END:}
<A NAME="token42">42:</A>115(1530)-115(1565):METHOD_DECLARATION:setBoardState(char[][] boardState) {
<A NAME="token43">43:</A>116(1571)-116(1598):ASSIGNMENT:this.boardState = boardState
<A NAME="token44">44:</A>117(1603)-117(1603):METHOD_DECLARATION_END:}
<A NAME="token45">45:</A>124(1695)-124(1711):METHOD_DECLARATION:getBoardState() {
<A NAME="token46">46:</A>125(1717)-125(1734):RETURN:return boardState;
<A NAME="token47">47:</A>126(1738)-126(1738):METHOD_DECLARATION_END:}
<A NAME="token48">48:</A>133(1821)-133(1843):METHOD_DECLARATION:setWinner(int winner) {
<A NAME="token49">49:</A>134(1849)-134(1868):ASSIGNMENT:this.winner = winner
<A NAME="token50">50:</A>135(1873)-135(1873):METHOD_DECLARATION_END:}
<A NAME="token51">51:</A>142(1949)-142(1961):METHOD_DECLARATION:getWinner() {
<A NAME="token52">52:</A>143(1967)-143(1980):RETURN:return winner;
<A NAME="token53">53:</A>144(1984)-144(1984):METHOD_DECLARATION_END:}
<A NAME="token54">54:</A>151(2072)-151(2094):METHOD_DECLARATION:setDraw(boolean draw) {
<A NAME="token55">55:</A>152(2100)-152(2112):ASSIGNMENT:isDraw = draw
<A NAME="token56">56:</A>153(2117)-153(2117):METHOD_DECLARATION_END:}
<A NAME="token57">57:</A>160(2211)-160(2220):METHOD_DECLARATION:isDraw() {
<A NAME="token58">58:</A>161(2226)-161(2239):RETURN:return isDraw;
<A NAME="token59">59:</A>162(2243)-162(2243):METHOD_DECLARATION_END:}
<A NAME="token60">60:</A>170(2349)-170(2370):METHOD_DECLARATION:startGame(char type) {
<A NAME="token61">61:</A>171(2376)-171(2399):ASSIGNMENT:p1 = new Player(type, 1)
<A NAME="token62">62:</A>171(2381)-171(2399):NEW:new Player(type, 1)
<A NAME="token63">63:</A>172(2406)-172(2413):ASSIGNMENT:turn = 1
<A NAME="token64">64:</A>173(2418)-173(2418):METHOD_DECLARATION_END:}
<A NAME="token65">65:</A>178(2466)-178(2477):METHOD_DECLARATION:joinGame() {
<A NAME="token66">66:</A>179(2483)-179(2513):ASSIGNMENT:p2 = new Player(p1.oppent(), 2)
<A NAME="token67">67:</A>179(2488)-179(2513):NEW:new Player(p1.oppent(), 2)
<A NAME="token68">68:</A>179(2499)-179(2509):METHOD_INVOCATION:p1.oppent()
<A NAME="token69">69:</A>180(2520)-180(2537):ASSIGNMENT:gameStarted = true
<A NAME="token70">70:</A>181(2542)-181(2542):METHOD_DECLARATION_END:}
<A NAME="token71">71:</A>188(2646)-188(2655):METHOD_DECLARATION:toJson() {
<A NAME="token72">72:</A>189(2666)-189(2682):VARIABLE_DECLARATION:gson = new Gson()
<A NAME="token73">73:</A>189(2673)-189(2682):NEW:new Gson()
<A NAME="token74">74:</A>190(2689)-190(2713):RETURN:return gson.toJson(this);
<A NAME="token75">75:</A>190(2696)-190(2712):METHOD_INVOCATION:gson.toJson(this)
<A NAME="token76">76:</A>191(2717)-191(2717):METHOD_DECLARATION_END:}
<A NAME="token77">77:</A>200(2831)-200(2849):METHOD_DECLARATION:getPlayer(int id) {
<A NAME="token78">78:</A>201(2855)-201(2867):SWITCH:switch (id) {
<A NAME="token79">79:</A>202(2875)-202(2881):CASE:case 1:
<A NAME="token80">80:</A>203(2891)-203(2900):RETURN:return p1;
<A NAME="token81">81:</A>204(2908)-204(2914):CASE:case 2:
<A NAME="token82">82:</A>205(2924)-205(2933):RETURN:return p2;
<A NAME="token83">83:</A>206(2941)-206(2948):CASE:default:
<A NAME="token84">84:</A>207(2958)-207(3020):THROW:throw new IllegalArgumentException("Player Id doesn't exist.");
<A NAME="token85">85:</A>207(2964)-207(3019):NEW:new IllegalArgumentException("Player Id doesn't exist.")
<A NAME="token86">86:</A>208(3026)-208(3026):SWITCH_END:}
<A NAME="token87">87:</A>209(3030)-209(3030):METHOD_DECLARATION_END:}
<A NAME="token88">88:</A>217(3151)-217(3174):METHOD_DECLARATION:getPlayerId(char type) {
<A NAME="token89">89:</A>218(3180)-218(3204):IF:if (type == p1.getType())
<A NAME="token90">90:</A>218(3192)-218(3203):METHOD_INVOCATION:p1.getType()
<A NAME="token91">91:</A>218(3206)-218(3206):BLOCK:{
<A NAME="token92">92:</A>219(3214)-219(3222):RETURN:return 1;
<A NAME="token93">93:</A>220(3228)-220(3228):BLOCK_END:}
<A NAME="token94">94:</A>220(3228)-220(3228):IF_END:}
<A NAME="token95">95:</A>220(3230)-220(3233):ELSE:else
<A NAME="token96">96:</A>220(3235)-220(3259):IF:if (type == p2.getType())
<A NAME="token97">97:</A>220(3247)-220(3258):METHOD_INVOCATION:p2.getType()
<A NAME="token98">98:</A>220(3261)-220(3261):BLOCK:{
<A NAME="token99">99:</A>221(3269)-221(3277):RETURN:return 2;
<A NAME="token100">100:</A>222(3283)-222(3283):BLOCK_END:}
<A NAME="token101">101:</A>222(3283)-222(3283):IF_END:}
<A NAME="token102">102:</A>222(3285)-222(3288):ELSE:else
<A NAME="token103">103:</A>222(3290)-222(3290):BLOCK:{
<A NAME="token104">104:</A>223(3298)-223(3382):THROW:throw new IllegalArgumentException(String.format("Invalid player type '%c'!", type));
<A NAME="token105">105:</A>223(3304)-223(3381):NEW:new IllegalArgumentException(String.format("Invalid player type '%c'!", type))
<A NAME="token106">106:</A>223(3333)-223(3380):METHOD_INVOCATION:String.format("Invalid player type '%c'!", type)
<A NAME="token107">107:</A>224(3388)-224(3388):BLOCK_END:}
<A NAME="token108">108:</A>224(3388)-224(3388):ELSE_END:}
<A NAME="token109">109:</A>225(3392)-225(3392):METHOD_DECLARATION_END:}
<A NAME="token110">110:</A>232(3501)-232(3517):METHOD_DECLARATION:move(Move move) {
<A NAME="token111">111:</A>233(3527)-233(3559):VARIABLE_DECLARATION:playId = move.getPlayer().getId()
<A NAME="token112">112:</A>233(3536)-233(3551):METHOD_INVOCATION:move.getPlayer()
<A NAME="token113">113:</A>233(3536)-233(3559):METHOD_INVOCATION:move.getPlayer().getId()
<A NAME="token114">114:</A>234(3570)-234(3588):VARIABLE_DECLARATION:x = move.getMoveX()
<A NAME="token115">115:</A>234(3574)-234(3588):METHOD_INVOCATION:move.getMoveX()
<A NAME="token116">116:</A>235(3599)-235(3617):VARIABLE_DECLARATION:y = move.getMoveY()
<A NAME="token117">117:</A>235(3603)-235(3617):METHOD_INVOCATION:move.getMoveY()
<A NAME="token118">118:</A>237(3625)-237(3641):IF:if (!gameStarted)
<A NAME="token119">119:</A>237(3643)-237(3643):BLOCK:{
<A NAME="token120">120:</A>238(3651)-238(3730):RETURN:return new Message(false, 400, "Game is not started, please start game first.");
<A NAME="token121">121:</A>238(3658)-238(3729):NEW:new Message(false, 400, "Game is not started, please start game first.")
<A NAME="token122">122:</A>239(3736)-239(3736):BLOCK_END:}
<A NAME="token123">123:</A>239(3736)-239(3736):IF_END:}
<A NAME="token124">124:</A>240(3742)-240(3760):IF:if (playId != turn)
<A NAME="token125">125:</A>240(3762)-240(3762):BLOCK:{
<A NAME="token126">126:</A>241(3770)-241(3853):RETURN:return new Message(false, 400, String.format("It's not Player %d's turn.", playId));
<A NAME="token127">127:</A>241(3777)-241(3852):NEW:new Message(false, 400, String.format("It's not Player %d's turn.", playId))
<A NAME="token128">128:</A>241(3801)-241(3851):METHOD_INVOCATION:String.format("It's not Player %d's turn.", playId)
<A NAME="token129">129:</A>242(3859)-242(3859):BLOCK_END:}
<A NAME="token130">130:</A>242(3859)-242(3859):IF_END:}
<A NAME="token131">131:</A>243(3865)-243(3901):IF:if (x &lt; 0 || x &gt; 3 || y &lt; 0 || y &gt; 3)
<A NAME="token132">132:</A>243(3903)-243(3903):BLOCK:{
<A NAME="token133">133:</A>244(3911)-244(3972):RETURN:return new Message(false, 400, "Selected position overflow!");
<A NAME="token134">134:</A>244(3918)-244(3971):NEW:new Message(false, 400, "Selected position overflow!")
<A NAME="token135">135:</A>245(3978)-245(3978):BLOCK_END:}
<A NAME="token136">136:</A>245(3978)-245(3978):IF_END:}
<A NAME="token137">137:</A>246(3984)-246(4009):IF:if (boardState[x][y] != 0)
<A NAME="token138">138:</A>246(4011)-246(4011):BLOCK:{
<A NAME="token139">139:</A>247(4019)-247(4093):RETURN:return new Message(false, 400, "Selected position has already been used.");
<A NAME="token140">140:</A>247(4026)-247(4092):NEW:new Message(false, 400, "Selected position has already been used.")
<A NAME="token141">141:</A>248(4099)-248(4099):BLOCK_END:}
<A NAME="token142">142:</A>248(4099)-248(4099):IF_END:}
<A NAME="token143">143:</A>249(4105)-249(4149):ASSIGNMENT:boardState[x][y] = move.getPlayer().getType()
<A NAME="token144">144:</A>249(4124)-249(4139):METHOD_INVOCATION:move.getPlayer()
<A NAME="token145">145:</A>249(4124)-249(4149):METHOD_INVOCATION:move.getPlayer().getType()
<A NAME="token146">146:</A>250(4156)-250(4179):ASSIGNMENT:turn = turn == 1 ? 2 : 1
<A NAME="token147">147:</A>251(4186)-251(4198):METHOD_INVOCATION:checkWinner()
<A NAME="token148">148:</A>252(4205)-252(4239):RETURN:return new Message(false, 100, "");
<A NAME="token149">149:</A>252(4212)-252(4238):NEW:new Message(false, 100, "")
<A NAME="token150">150:</A>253(4243)-253(4243):METHOD_DECLARATION_END:}
<A NAME="token151">151:</A>258(4317)-258(4331):METHOD_DECLARATION:checkWinner() {
<A NAME="token152">152:</A>259(4337)-259(4363):FOR:for (int i = 0; i &lt; 3; i++)
<A NAME="token153">153:</A>259(4346)-259(4350):VARIABLE_DECLARATION:i = 0
<A NAME="token154">154:</A>259(4360)-259(4362):ASSIGNMENT:i++
<A NAME="token155">155:</A>259(4365)-259(4365):BLOCK:{
<A NAME="token156">156:</A>260(4373)-260(4453):IF:if (boardState[i][0] == boardState[i][1] &amp;&amp; boardState[i][0] == boardState[i][2])
<A NAME="token157">157:</A>260(4455)-260(4455):BLOCK:{
<A NAME="token158">158:</A>261(4465)-261(4490):IF:if (boardState[i][0] == 0)
<A NAME="token159">159:</A>261(4492)-261(4492):BLOCK:{
<A NAME="token160">160:</A>262(4504)-262(4512):CONTINUE:continue;
<A NAME="token161">161:</A>263(4522)-263(4522):BLOCK_END:}
<A NAME="token162">162:</A>263(4522)-263(4522):IF_END:}
<A NAME="token163">163:</A>264(4532)-264(4569):ASSIGNMENT:winner = getPlayerId(boardState[i][0])
<A NAME="token164">164:</A>264(4541)-264(4569):METHOD_INVOCATION:getPlayerId(boardState[i][0])
<A NAME="token165">165:</A>265(4580)-265(4586):RETURN:return;
<A NAME="token166">166:</A>266(4594)-266(4594):BLOCK_END:}
<A NAME="token167">167:</A>266(4594)-266(4594):IF_END:}
<A NAME="token168">168:</A>267(4602)-267(4682):IF:if (boardState[0][i] == boardState[1][i] &amp;&amp; boardState[0][i] == boardState[2][i])
<A NAME="token169">169:</A>267(4684)-267(4684):BLOCK:{
<A NAME="token170">170:</A>268(4694)-268(4719):IF:if (boardState[0][i] == 0)
<A NAME="token171">171:</A>268(4721)-268(4721):BLOCK:{
<A NAME="token172">172:</A>269(4733)-269(4741):CONTINUE:continue;
<A NAME="token173">173:</A>270(4751)-270(4751):BLOCK_END:}
<A NAME="token174">174:</A>270(4751)-270(4751):IF_END:}
<A NAME="token175">175:</A>271(4761)-271(4798):ASSIGNMENT:winner = getPlayerId(boardState[0][i])
<A NAME="token176">176:</A>271(4770)-271(4798):METHOD_INVOCATION:getPlayerId(boardState[0][i])
<A NAME="token177">177:</A>272(4809)-272(4815):RETURN:return;
<A NAME="token178">178:</A>273(4823)-273(4823):BLOCK_END:}
<A NAME="token179">179:</A>273(4823)-273(4823):IF_END:}
<A NAME="token180">180:</A>274(4829)-274(4829):BLOCK_END:}
<A NAME="token181">181:</A>274(4829)-274(4829):FOR_END:}
<A NAME="token182">182:</A>275(4835)-275(4915):IF:if (boardState[0][0] == boardState[1][1] &amp;&amp; boardState[0][0] == boardState[2][2])
<A NAME="token183">183:</A>275(4917)-275(4917):BLOCK:{
<A NAME="token184">184:</A>276(4925)-276(4950):IF:if (boardState[0][0] != 0)
<A NAME="token185">185:</A>276(4952)-276(4952):BLOCK:{
<A NAME="token186">186:</A>277(4962)-277(4999):ASSIGNMENT:winner = getPlayerId(boardState[0][0])
<A NAME="token187">187:</A>277(4971)-277(4999):METHOD_INVOCATION:getPlayerId(boardState[0][0])
<A NAME="token188">188:</A>278(5010)-278(5016):RETURN:return;
<A NAME="token189">189:</A>279(5024)-279(5024):BLOCK_END:}
<A NAME="token190">190:</A>279(5024)-279(5024):IF_END:}
<A NAME="token191">191:</A>280(5030)-280(5030):BLOCK_END:}
<A NAME="token192">192:</A>280(5030)-280(5030):IF_END:}
<A NAME="token193">193:</A>281(5036)-281(5116):IF:if (boardState[0][2] == boardState[1][1] &amp;&amp; boardState[0][2] == boardState[2][0])
<A NAME="token194">194:</A>281(5118)-281(5118):BLOCK:{
<A NAME="token195">195:</A>282(5126)-282(5151):IF:if (boardState[0][2] != 0)
<A NAME="token196">196:</A>282(5153)-282(5153):BLOCK:{
<A NAME="token197">197:</A>283(5163)-283(5200):ASSIGNMENT:winner = getPlayerId(boardState[0][2])
<A NAME="token198">198:</A>283(5172)-283(5200):METHOD_INVOCATION:getPlayerId(boardState[0][2])
<A NAME="token199">199:</A>284(5211)-284(5217):RETURN:return;
<A NAME="token200">200:</A>285(5225)-285(5225):BLOCK_END:}
<A NAME="token201">201:</A>285(5225)-285(5225):IF_END:}
<A NAME="token202">202:</A>286(5231)-286(5231):BLOCK_END:}
<A NAME="token203">203:</A>286(5231)-286(5231):IF_END:}
<A NAME="token204">204:</A>288(5242)-288(5254):VARIABLE_DECLARATION:filledNum = 0
<A NAME="token205">205:</A>289(5261)-289(5287):FOR:for (int i = 0; i &lt; 3; i++)
<A NAME="token206">206:</A>289(5270)-289(5274):VARIABLE_DECLARATION:i = 0
<A NAME="token207">207:</A>289(5284)-289(5286):ASSIGNMENT:i++
<A NAME="token208">208:</A>289(5289)-289(5289):BLOCK:{
<A NAME="token209">209:</A>290(5297)-290(5323):FOR:for (int j = 0; j &lt; 3; j++)
<A NAME="token210">210:</A>290(5306)-290(5310):VARIABLE_DECLARATION:j = 0
<A NAME="token211">211:</A>290(5320)-290(5322):ASSIGNMENT:j++
<A NAME="token212">212:</A>290(5325)-290(5325):BLOCK:{
<A NAME="token213">213:</A>291(5335)-291(5360):IF:if (boardState[i][j] != 0)
<A NAME="token214">214:</A>291(5362)-291(5362):BLOCK:{
<A NAME="token215">215:</A>292(5374)-292(5384):ASSIGNMENT:filledNum++
<A NAME="token216">216:</A>293(5395)-293(5395):BLOCK_END:}
<A NAME="token217">217:</A>293(5395)-293(5395):IF_END:}
<A NAME="token218">218:</A>294(5403)-294(5403):BLOCK_END:}
<A NAME="token219">219:</A>294(5403)-294(5403):FOR_END:}
<A NAME="token220">220:</A>295(5409)-295(5409):BLOCK_END:}
<A NAME="token221">221:</A>295(5409)-295(5409):FOR_END:}
<A NAME="token222">222:</A>296(5415)-296(5433):IF:if (filledNum == 9)
<A NAME="token223">223:</A>296(5435)-296(5435):BLOCK:{
<A NAME="token224">224:</A>297(5443)-297(5455):ASSIGNMENT:isDraw = true
<A NAME="token225">225:</A>298(5462)-298(5462):BLOCK_END:}
<A NAME="token226">226:</A>298(5462)-298(5462):IF_END:}
<A NAME="token227">227:</A>299(5466)-299(5466):METHOD_DECLARATION_END:}
<A NAME="token228">228:</A>301(5469)-301(5469):CLASS_DECLARATION_END:}
</PRE></CODE>
</BODY>
</HTML>
