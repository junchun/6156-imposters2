<HTML>
<HEAD></HEAD>
<BODY>
<CODE><PRE>
<A NAME="token0">0:</A>1(0)-1(19):PACKAGE_DECLARATION:package controllers;
<A NAME="token1">1:</A>3(22)-3(49):IMPORT_DECLARATION:import com.google.gson.Gson;
<A NAME="token2">2:</A>4(51)-4(76):IMPORT_DECLARATION:import io.javalin.Javalin;
<A NAME="token3">3:</A>5(78)-5(104):IMPORT_DECLARATION:import java.io.IOException;
<A NAME="token4">4:</A>6(106)-6(128):IMPORT_DECLARATION:import java.util.Queue;
<A NAME="token5">5:</A>7(130)-7(153):IMPORT_DECLARATION:import models.GameBoard;
<A NAME="token6">6:</A>8(155)-8(176):IMPORT_DECLARATION:import models.Message;
<A NAME="token7">7:</A>9(178)-9(198):IMPORT_DECLARATION:import models.Player;
<A NAME="token8">8:</A>10(200)-10(246):IMPORT_DECLARATION:import org.eclipse.jetty.websocket.api.Session;
<A NAME="token9">9:</A>10(246)-12(264):CLASS_DECLARATION:;
<A NAME="token10">10:</A>14(294)-14(311):VARIABLE_DECLARATION:PORT_NUMBER = 8080
<A NAME="token11">11:</A>16(340)-16(342):VARIABLE_DECLARATION:app
<A NAME="token12">12:</A>23(462)-23(488):METHOD_DECLARATION:main(final String[] args) {
<A NAME="token13">13:</A>28(521)-28(537):IF:if (app=="/echo")
<A NAME="token14">14:</A>28(539)-28(539):BLOCK:{
<A NAME="token15">15:</A>29(547)-29(568):METHOD_INVOCATION:ctx.result(ctx.body())
<A NAME="token16">16:</A>29(558)-29(567):METHOD_INVOCATION:ctx.body()
<A NAME="token17">17:</A>30(575)-30(575):BLOCK_END:}
<A NAME="token18">18:</A>30(575)-30(575):IF_END:}
<A NAME="token19">19:</A>32(614)-32(633):IF:if (app=="/newgame")
<A NAME="token20">20:</A>32(635)-32(635):BLOCK:{
<A NAME="token21">21:</A>33(643)-33(673):METHOD_INVOCATION:ctx.redirect("/tictactoe.html")
<A NAME="token22">22:</A>34(680)-34(680):BLOCK_END:}
<A NAME="token23">23:</A>34(680)-34(680):IF_END:}
<A NAME="token24">24:</A>35(696)-35(715):VARIABLE_DECLARATION:gb = new GameBoard()
<A NAME="token25">25:</A>35(701)-35(715):NEW:new GameBoard()
<A NAME="token26">26:</A>36(727)-36(743):VARIABLE_DECLARATION:gson = new Gson()
<A NAME="token27">27:</A>36(734)-36(743):NEW:new Gson()
<A NAME="token28">28:</A>38(779)-38(799):VARIABLE_DECLARATION:symbols = new char[2]
<A NAME="token29">29:</A>41(850)-41(871):IF:if (app=="/startgame")
<A NAME="token30">30:</A>41(873)-41(873):BLOCK:{
<A NAME="token31">31:</A>42(886)-42(910):VARIABLE_DECLARATION:t1 = ctx.body().charAt(5)
<A NAME="token32">32:</A>42(891)-42(900):METHOD_INVOCATION:ctx.body()
<A NAME="token33">33:</A>42(891)-42(910):METHOD_INVOCATION:ctx.body().charAt(5)
<A NAME="token34">34:</A>43(919)-43(933):ASSIGNMENT:symbols[0] = t1
<A NAME="token35">35:</A>44(949)-44(970):VARIABLE_DECLARATION:p1 = new Player(t1, 1)
<A NAME="token36">36:</A>44(954)-44(970):NEW:new Player(t1, 1)
<A NAME="token37">37:</A>45(979)-45(990):METHOD_INVOCATION:gb.setP1(p1)
<A NAME="token38">38:</A>46(999)-46(1022):METHOD_INVOCATION:gb.setGameStarted(false)
<A NAME="token39">39:</A>47(1031)-47(1043):METHOD_INVOCATION:gb.setTurn(1)
<A NAME="token40">40:</A>48(1061)-48(1135):VARIABLE_DECLARATION:ibs = { { '\u0000', '\u0000', '\u0000' }, { '\u0000', '\u0000', '\u0000' },
<A NAME="token41">41:</A>49(1144)-49(1164):METHOD_INVOCATION:   { '\u0000', '\u000
<A NAME="token42">42:</A>49(1173)-50(1187):METHOD_INVOCATION:000' } };
<A NAME="token43">43:</A>50(1196)-51(1212):METHOD_INVOCATION:oardState(ibs);
<A NAME="token44">44:</A>51(1221)-52(1247):METHOD_INVOCATION:setWinner(0);
<A NAME="token45">45:</A>51(1232)-52(1246):METHOD_INVOCATION:);
<A NAME="token46">46:</A>52(1254)-52(1254):BLOCK_END:l
<A NAME="token47">47:</A>52(1254)-52(1254):IF_END:l
<A NAME="token48">48:</A>53(1292)-56(1312):IF:);
<A NAME="token49">49:</A>56(1314)-56(1314):BLOCK:r
<A NAME="token50">50:</A>56(1322)-57(1356):METHOD_INVOCATION:s the game
<A NAME="token51">51:</A>58(1370)-58(1377):VARIABLE_DECLARATION:.redirec
<A NAME="token52">52:</A>58(1386)-59(1417):IF:actoe.html?p=2");
<A NAME="token53">53:</A>58(1390)-58(1399):METHOD_INVOCATION:e.html?p=2
<A NAME="token54">54:</A>58(1390)-59(1409):METHOD_INVOCATION:e.html?p=2");
<A NAME="token55">55:</A>59(1419)-59(1419):BLOCK: 
<A NAME="token56">56:</A>60(1429)-60(1436):ASSIGNMENT:  if (gb
<A NAME="token57">57:</A>60(1445)-60(1445):BLOCK_END:.
<A NAME="token58">58:</A>60(1445)-60(1445):IF_END:.
<A NAME="token59">59:</A>60(1453)-61(1467):ASSIGNMENT:() == 'X') {
<A NAME="token60">60:</A>61(1483)-63(1504):VARIABLE_DECLARATION:
<A NAME="token61">61:</A>62(1488)-63(1504):NEW:  }
<A NAME="token62">62:</A>63(1513)-64(1524):METHOD_INVOCATION:;
<A NAME="token63">63:</A>64(1533)-65(1555):METHOD_INVOCATION:new Player(t2, 2);
<A NAME="token64">64:</A>65(1564)-67(1605):METHOD_INVOCATION:P2(p2);
<A NAME="token65">65:</A>66(1590)-67(1604):METHOD_INVOCATION:arted(true);
<A NAME="token66">66:</A>67(1612)-67(1612):BLOCK_END:d
<A NAME="token67">67:</A>67(1612)-67(1612):IF_END:d
<A NAME="token68">68:</A>67(1648)-70(1666):IF:b));
<A NAME="token69">69:</A>70(1668)-70(1668):BLOCK:p
<A NAME="token70">70:</A>70(1680)-71(1710):VARIABLE_DECLARATION:ter move
<A NAME="token71">71:</A>70(1685)-71(1694):METHOD_INVOCATION:ove
<A NAME="token72">72:</A>70(1685)-71(1704):METHOD_INVOCATION:ove
<A NAME="token73">73:</A>72(1726)-72(1742):VARIABLE_DECLARATION:d = ctx.path().ch
<A NAME="token74">74:</A>72(1733)-72(1742):METHOD_INVOCATION:.path().ch
<A NAME="token75">75:</A>72(1755)-73(1778):VARIABLE_DECLARATION:';
<A NAME="token76">76:</A>73(1759)-73(1772):METHOD_INVOCATION:     String mo
<A NAME="token77">77:</A>74(1791)-74(1814):VARIABLE_DECLARATION:     int x = move.charAt
<A NAME="token78">78:</A>74(1795)-74(1808):METHOD_INVOCATION: int x = move.
<A NAME="token79">79:</A>75(1831)-75(1847):VARIABLE_DECLARATION: int y = move.cha
<A NAME="token80">80:</A>75(1835)-75(1847):NEW: y = move.cha
<A NAME="token81">81:</A>76(1865)-76(1887):VARIABLE_DECLARATION:   Message m = new Mess
<A NAME="token82">82:</A>76(1870)-76(1887):METHOD_INVOCATION:ssage m = new Mess
<A NAME="token83">83:</A>77(1896)-77(1909):METHOD_INVOCATION:     char[][] 
<A NAME="token84">84:</A>78(1947)-80(1988):IF:ode(100);
<A NAME="token85">85:</A>79(1970)-79(1981):METHOD_INVOCATION:k if valid m
<A NAME="token86">86:</A>80(1990)-80(1990):BLOCK: 
<A NAME="token87">87:</A>80(2000)-80(2023):METHOD_INVOCATION:][y] != '\u0000' || gb.g
<A NAME="token88">88:</A>80(2034)-81(2061):METHOD_INVOCATION:= id) {
<A NAME="token89">89:</A>81(2072)-82(2097):METHOD_INVOCATION:e);
<A NAME="token90">90:</A>82(2083)-82(2096):METHOD_INVOCATION: m.setMessage(
<A NAME="token91">91:</A>82(2106)-82(2106):BLOCK_END:m
<A NAME="token92">92:</A>82(2106)-82(2106):IF_END:m
<A NAME="token93">93:</A>82(2108)-82(2111):ELSE:ve")
<A NAME="token94">94:</A>82(2113)-82(2113):BLOCK:

<A NAME="token95">95:</A>83(2145)-84(2170):ASSIGNMENT:m));
<A NAME="token96">96:</A>84(2181)-85(2200):METHOD_INVOCATION:board
<A NAME="token97">97:</A>85(2211)-85(2222):IF:ls[id - 1];

<A NAME="token98">98:</A>86(2224)-86(2224):BLOCK: 
<A NAME="token99">99:</A>86(2236)-86(2248):METHOD_INVOCATION:tBoardState(b
<A NAME="token100">100:</A>87(2259)-87(2259):BLOCK_END: 
<A NAME="token101">101:</A>87(2259)-87(2259):IF_END: 
<A NAME="token102">102:</A>87(2261)-87(2264):ELSE:if (
<A NAME="token103">103:</A>87(2266)-87(2266):BLOCK:d
<A NAME="token104">104:</A>88(2278)-88(2290):METHOD_INVOCATION:        gb.se
<A NAME="token105">105:</A>89(2301)-89(2301):BLOCK_END: 
<A NAME="token106">106:</A>89(2301)-89(2301):ELSE_END: 
<A NAME="token107">107:</A>89(2311)-90(2333):METHOD_INVOCATION:else {
<A NAME="token108">108:</A>91(2344)-92(2359):METHOD_INVOCATION:       }
<A NAME="token109">109:</A>92(2370)-93(2395):METHOD_INVOCATION:Validity(true);
<A NAME="token110">110:</A>92(2381)-93(2394):METHOD_INVOCATION:ue);
<A NAME="token111">111:</A>94(2444)-96(2454):VARIABLE_DECLARATION:));
<A NAME="token112">112:</A>96(2465)-97(2491):FOR:ing for draw
<A NAME="token113">113:</A>96(2474)-97(2478):VARIABLE_DECLARATION:raw
<A NAME="token114">114:</A>97(2488)-97(2490):ASSIGNMENT:ole
<A NAME="token115">115:</A>97(2493)-97(2493):BLOCK: 
<A NAME="token116">116:</A>97(2505)-98(2531):FOR:;
<A NAME="token117">117:</A>98(2514)-98(2518):VARIABLE_DECLARATION: for 
<A NAME="token118">118:</A>98(2528)-98(2530):ASSIGNMENT:0; 
<A NAME="token119">119:</A>98(2533)-98(2533):BLOCK:&lt;
<A NAME="token120">120:</A>99(2547)-99(2566):IF:        for (int j =
<A NAME="token121">121:</A>99(2568)-99(2568):BLOCK:0
<A NAME="token122">122:</A>99(2584)-100(2595):ASSIGNMENT:
<A NAME="token123">123:</A>100(2612)-100(2617):BREAK: '\u00
<A NAME="token124">124:</A>101(2631)-101(2631):BLOCK_END: 
<A NAME="token125">125:</A>101(2631)-101(2631):IF_END: 
<A NAME="token126">126:</A>101(2643)-101(2643):BLOCK_END: 
<A NAME="token127">127:</A>101(2643)-101(2643):FOR_END: 
<A NAME="token128">128:</A>102(2653)-102(2653):BLOCK_END: 
<A NAME="token129">129:</A>102(2653)-102(2653):FOR_END: 
<A NAME="token130">130:</A>102(2663)-102(2671):IF:    break
<A NAME="token131">131:</A>102(2673)-102(2673):BLOCK:

<A NAME="token132">132:</A>103(2685)-105(2700):METHOD_INVOCATION: }
<A NAME="token133">133:</A>106(2711)-106(2711):BLOCK_END: 
<A NAME="token134">134:</A>106(2711)-106(2711):IF_END: 
<A NAME="token135">135:</A>108(2758)-110(2778):VARIABLE_DECLARATION:        }
<A NAME="token136">136:</A>110(2797)-115(3094):VARIABLE_DECLARATION:er
<A NAME="token137">137:</A>115(3106)-115(3113):IF:000' &amp;&amp; 
<A NAME="token138">138:</A>115(3115)-115(3115):BLOCK:s
<A NAME="token139">139:</A>115(3127)-115(3142):METHOD_INVOCATION:s[1][1] &amp;&amp; bs[2]
<A NAME="token140">140:</A>115(3153)-115(3153):BLOCK_END:1
<A NAME="token141">141:</A>115(3153)-115(3153):IF_END:1
<A NAME="token142">142:</A>117(3164)-118(3205):METHOD_INVOCATION:       if (win) {
<A NAME="token143">143:</A>118(3190)-118(3204):METHOD_INVOCATION:  gb.setWinner(
<A NAME="token144">144:</A>119(3214)-119(3214):BLOCK_END: 
<A NAME="token145">145:</A>119(3214)-119(3214):ELSE_END: 
<A NAME="token146">146:</A>120(3220)-120(3220):BLOCK_END:

<A NAME="token147">147:</A>120(3220)-120(3220):IF_END:

<A NAME="token148">148:</A>121(3272)-125(3310):METHOD_INVOCATION:
<A NAME="token149">149:</A>125(3293)-125(3309):NEW:/ Web sockets - D
<A NAME="token150">150:</A>125(3315)-125(3315):METHOD_DECLARATION_END: 
<A NAME="token151">151:</A>133(3494)-135(3548):METHOD_DECLARATION: Websocket message send IO Exception
<A NAME="token152">152:</A>135(3569)-135(3604):VARIABLE_DECLARATION:ardToAllPlayers(final String gameBoa
<A NAME="token153">153:</A>135(3580)-135(3604):METHOD_INVOCATION:yers(final String gameBoa
<A NAME="token154">154:</A>135(3611)-136(3648):FOR:) {
<A NAME="token155">155:</A>136(3650)-136(3650):BLOCK:S
<A NAME="token156">156:</A>136(3658)-136(3662):TRY:etSes
<A NAME="token157">157:</A>137(3672)-137(3696):METHOD_INVOCATION:    for (Session sessionP
<A NAME="token158">158:</A>137(3672)-138(3722):METHOD_INVOCATION:    for (Session sessionPlayer : sessions) {
<A NAME="token159">159:</A>139(3731)-139(3731):TRY_END: 
<A NAME="token160">160:</A>139(3733)-139(3755):CATCH:    sessionPlayer.getRe
<A NAME="token161">161:</A>140(3790)-140(3790):CATCH_END: 
<A NAME="token162">162:</A>140(3796)-140(3796):BLOCK_END:}
<A NAME="token163">163:</A>140(3796)-140(3796):FOR_END:}
<A NAME="token164">164:</A>140(3800)-140(3800):METHOD_DECLARATION_END:t
<A NAME="token165">165:</A>141(3824)-141(3831):METHOD_DECLARATION:      //
<A NAME="token166">166:</A>141(3837)-141(3846):METHOD_INVOCATION:logger her
<A NAME="token167">167:</A>142(3851)-142(3851):METHOD_DECLARATION_END: 
<A NAME="token168">168:</A>142(3853)-142(3853):CLASS_DECLARATION_END: 
</PRE></CODE>
</BODY>
</HTML>
