<HTML>
<HEAD></HEAD>
<BODY>
<CODE><PRE>
<A NAME="token0">0:</A>1(0)-1(19):PACKAGE_DECLARATION:package controllers;
<A NAME="token1">1:</A>3(22)-3(47):IMPORT_DECLARATION:import io.javalin.Javalin;
<A NAME="token2">2:</A>4(49)-4(75):IMPORT_DECLARATION:import java.io.IOException;
<A NAME="token3">3:</A>5(77)-5(99):IMPORT_DECLARATION:import java.util.Queue;
<A NAME="token4">4:</A>6(101)-6(147):IMPORT_DECLARATION:import org.eclipse.jetty.websocket.api.Session;
<A NAME="token5">5:</A>8(150)-8(177):IMPORT_DECLARATION:import com.google.gson.Gson;
<A NAME="token6">6:</A>10(180)-10(203):IMPORT_DECLARATION:import models.GameBoard;
<A NAME="token7">7:</A>11(205)-11(226):IMPORT_DECLARATION:import models.Message;
<A NAME="token8">8:</A>12(228)-12(246):IMPORT_DECLARATION:import models.Move;
<A NAME="token9">9:</A>13(248)-13(268):IMPORT_DECLARATION:import models.Player;
<A NAME="token10">10:</A>13(268)-15(286):CLASS_DECLARATION:;
<A NAME="token11">11:</A>17(316)-17(333):VARIABLE_DECLARATION:PORT_NUMBER = 8080
<A NAME="token12">12:</A>19(362)-19(364):VARIABLE_DECLARATION:app
<A NAME="token13">13:</A>21(397)-21(416):VARIABLE_DECLARATION:gb = new GameBoard()
<A NAME="token14">14:</A>21(402)-21(416):NEW:new GameBoard()
<A NAME="token15">15:</A>23(446)-23(462):VARIABLE_DECLARATION:p1 = new Player()
<A NAME="token16">16:</A>23(451)-23(462):NEW:new Player()
<A NAME="token17">17:</A>25(492)-25(508):VARIABLE_DECLARATION:p2 = new Player()
<A NAME="token18">18:</A>25(497)-25(508):NEW:new Player()
<A NAME="token19">19:</A>27(536)-27(555):VARIABLE_DECLARATION:p1_move = new Move()
<A NAME="token20">20:</A>27(546)-27(555):NEW:new Move()
<A NAME="token21">21:</A>29(583)-29(602):VARIABLE_DECLARATION:p2_move = new Move()
<A NAME="token22">22:</A>29(593)-29(602):NEW:new Move()
<A NAME="token23">23:</A>31(633)-31(654):VARIABLE_DECLARATION:report = new Message()
<A NAME="token24">24:</A>31(642)-31(654):NEW:new Message()
<A NAME="token25">25:</A>33(672)-33(688):VARIABLE_DECLARATION:gson = new Gson()
<A NAME="token26">26:</A>33(679)-33(688):NEW:new Gson()
<A NAME="token27">27:</A>38(799)-38(825):METHOD_DECLARATION:main(final String[] args) {
<A NAME="token28">28:</A>43(858)-43(874):IF:if (app=="/echo")
<A NAME="token29">29:</A>43(876)-43(876):BLOCK:{
<A NAME="token30">30:</A>44(884)-44(905):METHOD_INVOCATION:ctx.result(ctx.body())
<A NAME="token31">31:</A>44(895)-44(904):METHOD_INVOCATION:ctx.body()
<A NAME="token32">32:</A>45(912)-45(912):BLOCK_END:}
<A NAME="token33">33:</A>45(912)-45(912):IF_END:}
<A NAME="token34">34:</A>48(942)-48(961):IF:if (app=="/newgame")
<A NAME="token35">35:</A>48(963)-48(963):BLOCK:{
<A NAME="token36">36:</A>49(971)-49(1001):METHOD_INVOCATION:ctx.redirect("/tictactoe.html")
<A NAME="token37">37:</A>50(1008)-50(1008):BLOCK_END:}
<A NAME="token38">38:</A>50(1008)-50(1008):IF_END:}
<A NAME="token39">39:</A>53(1066)-53(1087):IF:if (app=="/startgame")
<A NAME="token40">40:</A>53(1089)-53(1089):BLOCK:{
<A NAME="token41">41:</A>54(1104)-54(1119):VARIABLE_DECLARATION:msg = ctx.body()
<A NAME="token42">42:</A>54(1110)-54(1119):METHOD_INVOCATION:ctx.body()
<A NAME="token43">43:</A>55(1133)-55(1166):VARIABLE_DECLARATION:type = msg.split("=")[1].charAt(0)
<A NAME="token44">44:</A>55(1140)-55(1153):METHOD_INVOCATION:msg.split("=")
<A NAME="token45">45:</A>55(1140)-55(1166):METHOD_INVOCATION:msg.split("=")[1].charAt(0)
<A NAME="token46">46:</A>56(1175)-56(1185):METHOD_INVOCATION:p1.setId(1)
<A NAME="token47">47:</A>57(1194)-57(1209):METHOD_INVOCATION:p1.setType(type)
<A NAME="token48">48:</A>58(1218)-58(1229):METHOD_INVOCATION:gb.setP1(p1)
<A NAME="token49">49:</A>59(1238)-59(1258):METHOD_INVOCATION:p1_move.setPlayer(p1)
<A NAME="token50">50:</A>60(1267)-60(1289):METHOD_INVOCATION:gb.setGameStarted(true)
<A NAME="token51">51:</A>61(1298)-61(1313):IF:if (type == 'X')
<A NAME="token52">52:</A>61(1315)-61(1315):BLOCK:{
<A NAME="token53">53:</A>62(1327)-62(1337):METHOD_INVOCATION:p2.setId(2)
<A NAME="token54">54:</A>63(1350)-63(1364):METHOD_INVOCATION:p2.setType('O')
<A NAME="token55">55:</A>64(1373)-64(1373):BLOCK_END:}
<A NAME="token56">56:</A>64(1373)-64(1373):IF_END:}
<A NAME="token57">57:</A>64(1375)-64(1378):ELSE:else
<A NAME="token58">58:</A>64(1380)-64(1395):IF:if (type == 'O')
<A NAME="token59">59:</A>64(1397)-64(1397):BLOCK:{
<A NAME="token60">60:</A>65(1407)-65(1417):METHOD_INVOCATION:p2.setId(2)
<A NAME="token61">61:</A>66(1428)-66(1442):METHOD_INVOCATION:p2.setType('X')
<A NAME="token62">62:</A>67(1451)-67(1451):BLOCK_END:}
<A NAME="token63">63:</A>67(1451)-67(1451):IF_END:}
<A NAME="token64">64:</A>67(1451)-67(1451):ELSE_END:}
<A NAME="token65">65:</A>68(1459)-68(1470):METHOD_INVOCATION:gb.setP2(p2)
<A NAME="token66">66:</A>69(1479)-69(1499):METHOD_INVOCATION:p2_move.setPlayer(p2)
<A NAME="token67">67:</A>70(1508)-70(1520):METHOD_INVOCATION:gb.setTurn(1)
<A NAME="token68">68:</A>72(1574)-72(1600):METHOD_INVOCATION:ctx.result(gson.toJson(gb))
<A NAME="token69">69:</A>72(1585)-72(1599):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token70">70:</A>73(1607)-73(1607):BLOCK_END:}
<A NAME="token71">71:</A>73(1607)-73(1607):IF_END:}
<A NAME="token72">72:</A>76(1669)-76(1689):IF:if (app=="/joingame")
<A NAME="token73">73:</A>76(1691)-76(1691):BLOCK:{
<A NAME="token74">74:</A>77(1699)-77(1733):METHOD_INVOCATION:ctx.redirect("/tictactoe.html?p=2")
<A NAME="token75">75:</A>79(1787)-79(1813):METHOD_INVOCATION:ctx.result(gson.toJson(gb))
<A NAME="token76">76:</A>79(1798)-79(1812):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token77">77:</A>80(1822)-80(1863):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token78">78:</A>80(1848)-80(1862):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token79">79:</A>81(1870)-81(1870):BLOCK_END:}
<A NAME="token80">80:</A>81(1870)-81(1870):IF_END:}
<A NAME="token81">81:</A>84(1909)-84(1927):IF:if (app=="/move/1")
<A NAME="token82">82:</A>84(1929)-84(1929):BLOCK:{
<A NAME="token83">83:</A>86(1944)-86(2012):IF:if (gb.getTurn() == 1 &amp;&amp; gb.getWinner() == 0 &amp;&amp; gb.isDraw() == false)
<A NAME="token84">84:</A>86(1948)-86(1959):METHOD_INVOCATION:gb.getTurn()
<A NAME="token85">85:</A>86(1969)-86(1982):METHOD_INVOCATION:gb.getWinner()
<A NAME="token86">86:</A>86(1992)-86(2002):METHOD_INVOCATION:gb.isDraw()
<A NAME="token87">87:</A>87(2021)-87(2021):BLOCK:{
<A NAME="token88">88:</A>88(2035)-88(2050):VARIABLE_DECLARATION:msg = ctx.body()
<A NAME="token89">89:</A>88(2041)-88(2050):METHOD_INVOCATION:ctx.body()
<A NAME="token90">90:</A>89(2068)-89(2133):VARIABLE_DECLARATION:coord = {msg.split("&amp;")[0].charAt(2), msg.split("&amp;")[1].charAt(2)}
<A NAME="token91">91:</A>89(2077)-89(2090):METHOD_INVOCATION:msg.split("&amp;")
<A NAME="token92">92:</A>89(2077)-89(2103):METHOD_INVOCATION:msg.split("&amp;")[0].charAt(2)
<A NAME="token93">93:</A>89(2106)-89(2119):METHOD_INVOCATION:msg.split("&amp;")
<A NAME="token94">94:</A>89(2106)-89(2132):METHOD_INVOCATION:msg.split("&amp;")[1].charAt(2)
<A NAME="token95">95:</A>90(2148)-90(2247):VARIABLE_DECLARATION:is_valid_move = gb.checkGB(Character.getNumericValue(coord[0]), Character.getNumericValue(coord[1]))
<A NAME="token96">96:</A>90(2164)-90(2247):METHOD_INVOCATION:gb.checkGB(Character.getNumericValue(coord[0]), Character.getNumericValue(coord[1]))
<A NAME="token97">97:</A>90(2175)-90(2209):METHOD_INVOCATION:Character.getNumericValue(coord[0])
<A NAME="token98">98:</A>90(2212)-90(2246):METHOD_INVOCATION:Character.getNumericValue(coord[1])
<A NAME="token99">99:</A>91(2255)-91(2277):IF:if (is_valid_move == 1)
<A NAME="token100">100:</A>92(2284)-92(2284):BLOCK:{
<A NAME="token101">101:</A>93(2292)-93(2403):METHOD_INVOCATION:gb.setBoardState(Character.getNumericValue(coord[0]), Character.getNumericValue(coord[1]), gb.getp1().getType())
<A NAME="token102">102:</A>93(2309)-93(2343):METHOD_INVOCATION:Character.getNumericValue(coord[0])
<A NAME="token103">103:</A>93(2346)-93(2380):METHOD_INVOCATION:Character.getNumericValue(coord[1])
<A NAME="token104">104:</A>93(2383)-93(2392):METHOD_INVOCATION:gb.getp1()
<A NAME="token105">105:</A>93(2383)-93(2402):METHOD_INVOCATION:gb.getp1().getType()
<A NAME="token106">106:</A>94(2412)-94(2424):METHOD_INVOCATION:gb.setTurn(2)
<A NAME="token107">107:</A>95(2433)-95(2485):METHOD_INVOCATION:p1_move.setMoveX(Character.getNumericValue(coord[0]))
<A NAME="token108">108:</A>95(2450)-95(2484):METHOD_INVOCATION:Character.getNumericValue(coord[0])
<A NAME="token109">109:</A>96(2494)-96(2546):METHOD_INVOCATION:p1_move.setMoveY(Character.getNumericValue(coord[1]))
<A NAME="token110">110:</A>96(2511)-96(2545):METHOD_INVOCATION:Character.getNumericValue(coord[1])
<A NAME="token111">111:</A>98(2570)-98(2597):VARIABLE_DECLARATION:game_result = gb.checkwin(1)
<A NAME="token112">112:</A>98(2584)-98(2597):METHOD_INVOCATION:gb.checkwin(1)
<A NAME="token113">113:</A>99(2606)-99(2621):IF:if (game_result)
<A NAME="token114">114:</A>100(2629)-100(2629):BLOCK:{
<A NAME="token115">115:</A>102(2659)-102(2677):METHOD_INVOCATION:report.setCode(400)
<A NAME="token116">116:</A>103(2687)-103(2714):METHOD_INVOCATION:report.setMoveValidity(true)
<A NAME="token117">117:</A>104(2724)-104(2757):METHOD_INVOCATION:report.setMessage("Player1 wins!")
<A NAME="token118">118:</A>105(2767)-105(2790):METHOD_INVOCATION:gb.setGameStarted(false)
<A NAME="token119">119:</A>106(2800)-106(2814):METHOD_INVOCATION:gb.setWinner(1)
<A NAME="token120">120:</A>107(2824)-107(2865):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token121">121:</A>107(2850)-107(2864):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token122">122:</A>108(2874)-108(2874):BLOCK_END:}
<A NAME="token123">123:</A>108(2874)-108(2874):IF_END:}
<A NAME="token124">124:</A>108(2876)-108(2879):ELSE:else
<A NAME="token125">125:</A>108(2881)-108(2881):BLOCK:{
<A NAME="token126">126:</A>109(2898)-109(2921):VARIABLE_DECLARATION:is_draw = gb.checkdraw()
<A NAME="token127">127:</A>109(2908)-109(2921):METHOD_INVOCATION:gb.checkdraw()
<A NAME="token128">128:</A>110(2931)-110(2942):IF:if (is_draw)
<A NAME="token129">129:</A>111(2951)-111(2951):BLOCK:{
<A NAME="token130">130:</A>113(2985)-113(3003):METHOD_INVOCATION:report.setCode(300)
<A NAME="token131">131:</A>114(3014)-114(3041):METHOD_INVOCATION:report.setMoveValidity(true)
<A NAME="token132">132:</A>115(3052)-115(3082):METHOD_INVOCATION:report.setMessage("Game Draw!")
<A NAME="token133">133:</A>116(3093)-116(3116):METHOD_INVOCATION:gb.setGameStarted(false)
<A NAME="token134">134:</A>117(3127)-117(3142):METHOD_INVOCATION:gb.setDraw(true)
<A NAME="token135">135:</A>118(3153)-118(3194):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token136">136:</A>118(3179)-118(3193):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token137">137:</A>120(3213)-120(3213):BLOCK_END:}
<A NAME="token138">138:</A>120(3213)-120(3213):IF_END:}
<A NAME="token139">139:</A>120(3215)-120(3218):ELSE:else
<A NAME="token140">140:</A>120(3220)-120(3264):IF:if (game_result == false &amp;&amp; is_draw == false)
<A NAME="token141">141:</A>121(3273)-121(3273):BLOCK:{
<A NAME="token142">142:</A>123(3314)-123(3332):METHOD_INVOCATION:report.setCode(200)
<A NAME="token143">143:</A>124(3343)-124(3370):METHOD_INVOCATION:report.setMoveValidity(true)
<A NAME="token144">144:</A>125(3381)-125(3401):METHOD_INVOCATION:report.setMessage("")
<A NAME="token145">145:</A>126(3412)-126(3453):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token146">146:</A>126(3438)-126(3452):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token147">147:</A>128(3472)-128(3472):BLOCK_END:}
<A NAME="token148">148:</A>128(3472)-128(3472):IF_END:}
<A NAME="token149">149:</A>128(3472)-128(3472):ELSE_END:}
<A NAME="token150">150:</A>129(3480)-129(3480):BLOCK_END:}
<A NAME="token151">151:</A>129(3480)-129(3480):ELSE_END:}
<A NAME="token152">152:</A>131(3494)-131(3494):BLOCK_END:}
<A NAME="token153">153:</A>131(3494)-131(3494):IF_END:}
<A NAME="token154">154:</A>131(3496)-131(3499):ELSE:else
<A NAME="token155">155:</A>131(3501)-131(3523):IF:if(is_valid_move == -1)
<A NAME="token156">156:</A>132(3530)-132(3530):BLOCK:{
<A NAME="token157">157:</A>134(3577)-134(3595):METHOD_INVOCATION:report.setCode(700)
<A NAME="token158">158:</A>135(3607)-135(3635):METHOD_INVOCATION:report.setMoveValidity(false)
<A NAME="token159">159:</A>136(3644)-136(3677):METHOD_INVOCATION:report.setMessage("Out of Range!")
<A NAME="token160">160:</A>137(3686)-137(3727):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token161">161:</A>137(3712)-137(3726):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token162">162:</A>138(3735)-138(3735):BLOCK_END:}
<A NAME="token163">163:</A>138(3735)-138(3735):IF_END:}
<A NAME="token164">164:</A>138(3737)-138(3740):ELSE:else
<A NAME="token165">165:</A>139(3747)-139(3747):BLOCK:{
<A NAME="token166">166:</A>141(3805)-141(3823):METHOD_INVOCATION:report.setCode(600)
<A NAME="token167">167:</A>142(3832)-142(3860):METHOD_INVOCATION:report.setMoveValidity(false)
<A NAME="token168">168:</A>143(3866)-143(3916):METHOD_INVOCATION:report.setMessage("The place is already occupied!")
<A NAME="token169">169:</A>144(3922)-144(3963):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token170">170:</A>144(3948)-144(3962):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token171">171:</A>145(3971)-145(3971):BLOCK_END:}
<A NAME="token172">172:</A>145(3971)-145(3971):ELSE_END:}
<A NAME="token173">173:</A>146(3975)-146(4005):METHOD_INVOCATION:ctx.result(gson.toJson(report))
<A NAME="token174">174:</A>146(3986)-146(4004):METHOD_INVOCATION:gson.toJson(report)
<A NAME="token175">175:</A>147(4014)-147(4014):BLOCK_END:}
<A NAME="token176">176:</A>147(4014)-147(4014):IF_END:}
<A NAME="token177">177:</A>147(4016)-147(4019):ELSE:else
<A NAME="token178">178:</A>147(4021)-147(4021):BLOCK:{
<A NAME="token179">179:</A>148(4028)-148(4049):IF:if (gb.getTurn() == 2)
<A NAME="token180">180:</A>148(4032)-148(4043):METHOD_INVOCATION:gb.getTurn()
<A NAME="token181">181:</A>149(4056)-149(4056):BLOCK:{
<A NAME="token182">182:</A>151(4086)-151(4104):METHOD_INVOCATION:report.setCode(100)
<A NAME="token183">183:</A>152(4113)-152(4141):METHOD_INVOCATION:report.setMoveValidity(false)
<A NAME="token184">184:</A>153(4150)-153(4194):METHOD_INVOCATION:report.setMessage("This is player2\'s Turn!")
<A NAME="token185">185:</A>154(4202)-154(4202):BLOCK_END:}
<A NAME="token186">186:</A>154(4202)-154(4202):IF_END:}
<A NAME="token187">187:</A>154(4204)-154(4207):ELSE:else
<A NAME="token188">188:</A>155(4214)-155(4214):BLOCK:{
<A NAME="token189">189:</A>157(4244)-157(4262):METHOD_INVOCATION:report.setCode(500)
<A NAME="token190">190:</A>158(4271)-158(4299):METHOD_INVOCATION:report.setMoveValidity(false)
<A NAME="token191">191:</A>159(4308)-159(4352):METHOD_INVOCATION:report.setMessage("The game is already end!")
<A NAME="token192">192:</A>160(4360)-160(4360):BLOCK_END:}
<A NAME="token193">193:</A>160(4360)-160(4360):ELSE_END:}
<A NAME="token194">194:</A>162(4373)-162(4403):METHOD_INVOCATION:ctx.result(gson.toJson(report))
<A NAME="token195">195:</A>162(4384)-162(4402):METHOD_INVOCATION:gson.toJson(report)
<A NAME="token196">196:</A>163(4412)-163(4412):BLOCK_END:}
<A NAME="token197">197:</A>163(4412)-163(4412):ELSE_END:}
<A NAME="token198">198:</A>167(4519)-167(4519):BLOCK_END:}
<A NAME="token199">199:</A>167(4519)-167(4519):IF_END:}
<A NAME="token200">200:</A>170(4558)-170(4576):IF:if (app=="/move/2")
<A NAME="token201">201:</A>170(4578)-170(4578):BLOCK:{
<A NAME="token202">202:</A>172(4593)-172(4661):IF:if (gb.getTurn() == 2 &amp;&amp; gb.getWinner() == 0 &amp;&amp; gb.isDraw() == false)
<A NAME="token203">203:</A>172(4597)-172(4608):METHOD_INVOCATION:gb.getTurn()
<A NAME="token204">204:</A>172(4618)-172(4631):METHOD_INVOCATION:gb.getWinner()
<A NAME="token205">205:</A>172(4641)-172(4651):METHOD_INVOCATION:gb.isDraw()
<A NAME="token206">206:</A>173(4670)-173(4670):BLOCK:{
<A NAME="token207">207:</A>174(4684)-174(4699):VARIABLE_DECLARATION:msg = ctx.body()
<A NAME="token208">208:</A>174(4690)-174(4699):METHOD_INVOCATION:ctx.body()
<A NAME="token209">209:</A>175(4717)-175(4782):VARIABLE_DECLARATION:coord = {msg.split("&amp;")[0].charAt(2), msg.split("&amp;")[1].charAt(2)}
<A NAME="token210">210:</A>175(4726)-175(4739):METHOD_INVOCATION:msg.split("&amp;")
<A NAME="token211">211:</A>175(4726)-175(4752):METHOD_INVOCATION:msg.split("&amp;")[0].charAt(2)
<A NAME="token212">212:</A>175(4755)-175(4768):METHOD_INVOCATION:msg.split("&amp;")
<A NAME="token213">213:</A>175(4755)-175(4781):METHOD_INVOCATION:msg.split("&amp;")[1].charAt(2)
<A NAME="token214">214:</A>176(4797)-176(4896):VARIABLE_DECLARATION:is_valid_move = gb.checkGB(Character.getNumericValue(coord[0]), Character.getNumericValue(coord[1]))
<A NAME="token215">215:</A>176(4813)-176(4896):METHOD_INVOCATION:gb.checkGB(Character.getNumericValue(coord[0]), Character.getNumericValue(coord[1]))
<A NAME="token216">216:</A>176(4824)-176(4858):METHOD_INVOCATION:Character.getNumericValue(coord[0])
<A NAME="token217">217:</A>176(4861)-176(4895):METHOD_INVOCATION:Character.getNumericValue(coord[1])
<A NAME="token218">218:</A>177(4907)-177(4929):IF:if (is_valid_move == 1)
<A NAME="token219">219:</A>178(4936)-178(4936):BLOCK:{
<A NAME="token220">220:</A>179(4944)-179(5055):METHOD_INVOCATION:gb.setBoardState(Character.getNumericValue(coord[0]), Character.getNumericValue(coord[1]), gb.getp2().getType())
<A NAME="token221">221:</A>179(4961)-179(4995):METHOD_INVOCATION:Character.getNumericValue(coord[0])
<A NAME="token222">222:</A>179(4998)-179(5032):METHOD_INVOCATION:Character.getNumericValue(coord[1])
<A NAME="token223">223:</A>179(5035)-179(5044):METHOD_INVOCATION:gb.getp2()
<A NAME="token224">224:</A>179(5035)-179(5054):METHOD_INVOCATION:gb.getp2().getType()
<A NAME="token225">225:</A>180(5064)-180(5076):METHOD_INVOCATION:gb.setTurn(1)
<A NAME="token226">226:</A>181(5085)-181(5137):METHOD_INVOCATION:p2_move.setMoveX(Character.getNumericValue(coord[0]))
<A NAME="token227">227:</A>181(5102)-181(5136):METHOD_INVOCATION:Character.getNumericValue(coord[0])
<A NAME="token228">228:</A>182(5146)-182(5198):METHOD_INVOCATION:p2_move.setMoveY(Character.getNumericValue(coord[1]))
<A NAME="token229">229:</A>182(5163)-182(5197):METHOD_INVOCATION:Character.getNumericValue(coord[1])
<A NAME="token230">230:</A>184(5222)-184(5249):VARIABLE_DECLARATION:game_result = gb.checkwin(2)
<A NAME="token231">231:</A>184(5236)-184(5249):METHOD_INVOCATION:gb.checkwin(2)
<A NAME="token232">232:</A>185(5258)-185(5273):IF:if (game_result)
<A NAME="token233">233:</A>186(5281)-186(5281):BLOCK:{
<A NAME="token234">234:</A>188(5311)-188(5329):METHOD_INVOCATION:report.setCode(400)
<A NAME="token235">235:</A>189(5339)-189(5366):METHOD_INVOCATION:report.setMoveValidity(true)
<A NAME="token236">236:</A>190(5376)-190(5409):METHOD_INVOCATION:report.setMessage("Player2 wins!")
<A NAME="token237">237:</A>191(5419)-191(5442):METHOD_INVOCATION:gb.setGameStarted(false)
<A NAME="token238">238:</A>192(5452)-192(5466):METHOD_INVOCATION:gb.setWinner(2)
<A NAME="token239">239:</A>193(5476)-193(5517):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token240">240:</A>193(5502)-193(5516):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token241">241:</A>194(5526)-194(5526):BLOCK_END:}
<A NAME="token242">242:</A>194(5526)-194(5526):IF_END:}
<A NAME="token243">243:</A>194(5528)-194(5531):ELSE:else
<A NAME="token244">244:</A>194(5533)-194(5533):BLOCK:{
<A NAME="token245">245:</A>195(5550)-195(5573):VARIABLE_DECLARATION:is_draw = gb.checkdraw()
<A NAME="token246">246:</A>195(5560)-195(5573):METHOD_INVOCATION:gb.checkdraw()
<A NAME="token247">247:</A>196(5583)-196(5594):IF:if (is_draw)
<A NAME="token248">248:</A>197(5603)-197(5603):BLOCK:{
<A NAME="token249">249:</A>199(5637)-199(5655):METHOD_INVOCATION:report.setCode(300)
<A NAME="token250">250:</A>200(5666)-200(5693):METHOD_INVOCATION:report.setMoveValidity(true)
<A NAME="token251">251:</A>201(5704)-201(5734):METHOD_INVOCATION:report.setMessage("Game Draw!")
<A NAME="token252">252:</A>202(5745)-202(5768):METHOD_INVOCATION:gb.setGameStarted(false)
<A NAME="token253">253:</A>203(5779)-203(5794):METHOD_INVOCATION:gb.setDraw(true)
<A NAME="token254">254:</A>204(5805)-204(5846):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token255">255:</A>204(5831)-204(5845):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token256">256:</A>205(5856)-205(5856):BLOCK_END:}
<A NAME="token257">257:</A>205(5856)-205(5856):IF_END:}
<A NAME="token258">258:</A>205(5858)-205(5861):ELSE:else
<A NAME="token259">259:</A>205(5863)-205(5907):IF:if (game_result == false &amp;&amp; is_draw == false)
<A NAME="token260">260:</A>206(5916)-206(5916):BLOCK:{
<A NAME="token261">261:</A>208(5957)-208(5975):METHOD_INVOCATION:report.setCode(200)
<A NAME="token262">262:</A>209(5986)-209(6013):METHOD_INVOCATION:report.setMoveValidity(true)
<A NAME="token263">263:</A>210(6024)-210(6044):METHOD_INVOCATION:report.setMessage("")
<A NAME="token264">264:</A>211(6055)-211(6096):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token265">265:</A>211(6081)-211(6095):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token266">266:</A>212(6106)-212(6106):BLOCK_END:}
<A NAME="token267">267:</A>212(6106)-212(6106):IF_END:}
<A NAME="token268">268:</A>212(6106)-212(6106):ELSE_END:}
<A NAME="token269">269:</A>213(6114)-213(6114):BLOCK_END:}
<A NAME="token270">270:</A>213(6114)-213(6114):ELSE_END:}
<A NAME="token271">271:</A>215(6128)-215(6128):BLOCK_END:}
<A NAME="token272">272:</A>215(6128)-215(6128):IF_END:}
<A NAME="token273">273:</A>215(6130)-215(6133):ELSE:else
<A NAME="token274">274:</A>215(6135)-215(6157):IF:if(is_valid_move == -1)
<A NAME="token275">275:</A>216(6164)-216(6164):BLOCK:{
<A NAME="token276">276:</A>218(6211)-218(6229):METHOD_INVOCATION:report.setCode(700)
<A NAME="token277">277:</A>219(6241)-219(6269):METHOD_INVOCATION:report.setMoveValidity(false)
<A NAME="token278">278:</A>220(6278)-220(6311):METHOD_INVOCATION:report.setMessage("Out of Range!")
<A NAME="token279">279:</A>221(6320)-221(6361):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token280">280:</A>221(6346)-221(6360):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token281">281:</A>222(6369)-222(6369):BLOCK_END:}
<A NAME="token282">282:</A>222(6369)-222(6369):IF_END:}
<A NAME="token283">283:</A>222(6371)-222(6374):ELSE:else
<A NAME="token284">284:</A>223(6381)-223(6381):BLOCK:{
<A NAME="token285">285:</A>225(6439)-225(6457):METHOD_INVOCATION:report.setCode(600)
<A NAME="token286">286:</A>226(6466)-226(6494):METHOD_INVOCATION:report.setMoveValidity(false)
<A NAME="token287">287:</A>227(6500)-227(6550):METHOD_INVOCATION:report.setMessage("The place is already occupied!")
<A NAME="token288">288:</A>228(6556)-228(6597):METHOD_INVOCATION:sendGameBoardToAllPlayers(gson.toJson(gb))
<A NAME="token289">289:</A>228(6582)-228(6596):METHOD_INVOCATION:gson.toJson(gb)
<A NAME="token290">290:</A>229(6605)-229(6605):BLOCK_END:}
<A NAME="token291">291:</A>229(6605)-229(6605):ELSE_END:}
<A NAME="token292">292:</A>230(6615)-230(6645):METHOD_INVOCATION:ctx.result(gson.toJson(report))
<A NAME="token293">293:</A>230(6626)-230(6644):METHOD_INVOCATION:gson.toJson(report)
<A NAME="token294">294:</A>231(6654)-231(6654):BLOCK_END:}
<A NAME="token295">295:</A>231(6654)-231(6654):IF_END:}
<A NAME="token296">296:</A>231(6656)-231(6659):ELSE:else
<A NAME="token297">297:</A>231(6661)-231(6661):BLOCK:{
<A NAME="token298">298:</A>232(6670)-232(6691):IF:if (gb.getTurn() == 1)
<A NAME="token299">299:</A>232(6674)-232(6685):METHOD_INVOCATION:gb.getTurn()
<A NAME="token300">300:</A>233(6702)-233(6702):BLOCK:{
<A NAME="token301">301:</A>235(6736)-235(6754):METHOD_INVOCATION:report.setCode(100)
<A NAME="token302">302:</A>236(6765)-236(6793):METHOD_INVOCATION:report.setMoveValidity(false)
<A NAME="token303">303:</A>237(6804)-237(6848):METHOD_INVOCATION:report.setMessage("This is player1\'s Turn!")
<A NAME="token304">304:</A>238(6860)-238(6860):BLOCK_END:}
<A NAME="token305">305:</A>238(6860)-238(6860):IF_END:}
<A NAME="token306">306:</A>238(6862)-238(6865):ELSE:else
<A NAME="token307">307:</A>239(6876)-239(6876):BLOCK:{
<A NAME="token308">308:</A>241(6910)-241(6928):METHOD_INVOCATION:report.setCode(500)
<A NAME="token309">309:</A>242(6939)-242(6967):METHOD_INVOCATION:report.setMoveValidity(false)
<A NAME="token310">310:</A>243(6978)-243(7022):METHOD_INVOCATION:report.setMessage("The game is already end!")
<A NAME="token311">311:</A>244(7034)-244(7034):BLOCK_END:}
<A NAME="token312">312:</A>244(7034)-244(7034):ELSE_END:}
<A NAME="token313">313:</A>245(7041)-245(7071):METHOD_INVOCATION:ctx.result(gson.toJson(report))
<A NAME="token314">314:</A>245(7052)-245(7070):METHOD_INVOCATION:gson.toJson(report)
<A NAME="token315">315:</A>246(7080)-246(7080):BLOCK_END:}
<A NAME="token316">316:</A>246(7080)-246(7080):ELSE_END:}
<A NAME="token317">317:</A>250(7187)-250(7187):BLOCK_END:}
<A NAME="token318">318:</A>250(7187)-250(7187):IF_END:}
<A NAME="token319">319:</A>253(7243)-253(7281):METHOD_INVOCATION:app.ws("/gameboard", new UiWebSocket())
<A NAME="token320">320:</A>253(7264)-253(7280):NEW:new UiWebSocket()
<A NAME="token321">321:</A>254(7286)-254(7286):METHOD_DECLARATION_END:}
<A NAME="token322">322:</A>260(7454)-260(7508):METHOD_DECLARATION:sendGameBoardToAllPlayers(final String gameBoardJson) {
<A NAME="token323">323:</A>261(7529)-261(7564):VARIABLE_DECLARATION:sessions = UiWebSocket.getSessions()
<A NAME="token324">324:</A>261(7540)-261(7564):METHOD_INVOCATION:UiWebSocket.getSessions()
<A NAME="token325">325:</A>262(7571)-262(7608):FOR:for (Session sessionPlayer : sessions)
<A NAME="token326">326:</A>262(7610)-262(7610):BLOCK:{
<A NAME="token327">327:</A>263(7618)-263(7622):TRY:try {
<A NAME="token328">328:</A>264(7632)-264(7656):METHOD_INVOCATION:sessionPlayer.getRemote()
<A NAME="token329">329:</A>264(7632)-264(7682):METHOD_INVOCATION:sessionPlayer.getRemote().sendString(gameBoardJson)
<A NAME="token330">330:</A>265(7691)-265(7691):TRY_END:}
<A NAME="token331">331:</A>265(7693)-265(7715):CATCH:catch (IOException e) {
<A NAME="token332">332:</A>267(7751)-267(7785):METHOD_INVOCATION:System.out.println("logger report")
<A NAME="token333">333:</A>268(7794)-268(7794):CATCH_END:}
<A NAME="token334">334:</A>269(7800)-269(7800):BLOCK_END:}
<A NAME="token335">335:</A>269(7800)-269(7800):FOR_END:}
<A NAME="token336">336:</A>270(7804)-270(7804):METHOD_DECLARATION_END:}
<A NAME="token337">337:</A>272(7828)-272(7835):METHOD_DECLARATION:stop() {
<A NAME="token338">338:</A>273(7841)-273(7850):METHOD_INVOCATION:app.stop()
<A NAME="token339">339:</A>274(7855)-274(7855):METHOD_DECLARATION_END:}
<A NAME="token340">340:</A>275(7857)-275(7857):CLASS_DECLARATION_END:}
</PRE></CODE>
</BODY>
</HTML>
